# ==========================================================
# Halmos Web Server Configuration
# File ini seperti “buku petunjuk” bagi Halmos agar tahu SOP apa yang harus dia kerjakan,
# dia harus berjalan di mana dan dengan aturan seperti apa!
# ==========================================================

[Network]
# server_name : Alamat IP server
#   0.0.0.0  = menerima koneksi dari semua jaringan.
#   127.0.0.1 = hanya bisa diakses dari komputer lokal (localhost) saja.
#   Atau anda isi dengan IP public (jika anda punya) sehingga web server ini 
#   bisa diakses dari seluruh dunia.
server_name = 127.0.0.1

# Port tempat Halmos membuka pintu layanan
#   * Port 80  biasanya untuk HTTP standar 
#   * (Biasanya Apache atau Nginx, kalau kedua web server ini anda install di komputer anda)
# Port 443 biasanya untuk HTTPS
#   Sementara menggunakan 8080 supaya tidak bentrok dengan web server lain (Apache/Nginx), 
#   jika di server diinstall web server yang lain, di komputer yang sama.
#   Tetapi jika Halmos anda gunakan sebagai satu-satunya web server, 
#   maka bisa anda ganti menjadi 80 atau 443 jika anda menggunakan HTTPS.
server_port = 8080

[Storage]
# document_root : Folder tempat anda meletakkan file project website. 
# Ibaratnya ini “lemari dokumen” yang akan disajikan ke pengunjung.
# Contoh file yang ada folder ini : *.html, *.js, *.js, *.php, dsb.
document_root = /var/www/halmos/html/

# default_page : Nama file yang otomatis dibuka jika orang hanya menulis: http://<nama-domain>
# contoh : http://localhost:8080/
default_page = index.html

[Security]
# max_body_size: Batas maksimal ukuran file/form yang boleh dikirim user, 
# misalnya pada saat upload image (form multipart).
# Anda bisa membatasi setting dengan ukuran misalnya :
# 10GB (Gyga byte), 10MB (Mega Byte), 10KB (Kilo Byte), 10485760 (tanpa satuan).
# Silahkan disesuaikan dengan kapasitas disk server anda.
max_body_size = 10MB

# Mode aplikasi aman
# jika true → fitur perlindungan diaktifkan
secure_application = false
#end_to_end_encryption = true

# rate_limit_enabled : Mengaktifkan pembatasan jumlah akses (anti spam/flood)
# Jika nilainya diisi true, maka web server akan menolak koneksi spam/flood
rate_limit_enabled = false

# max_requests_per_sec : Maksimal berapa kali satu IP boleh mengakses web server ini per detik.
# Konfigurasi max_requests_per_sec ini akan berfungsi jika konfigurasi rate_limit_enabled diisi true
# Jika rate_limit_enabled diisi false, maka max_requests_per_sec ini juga tidak aktif.
max_requests_per_sec = 50

# anti_slow_loris_enabled : Mengaktifkan perlindungan slow loris,
# Jika anda ubah nilainya menjadi true, maka anti slow loris akan aktif
anti_slow_loris_enabled = false

# keep_alive_timeout : Waktu tunggu koneksi keep-alive (dalam detik)
# Jika lebih dari 5 detik tidak ada aktivitas, koneksi ke browser otomatis ditutup
keep_alive_timeout = 5

[Backend_PHP]
# php_server : Jika website memakai PHP, Halmos akan meneruskan ke PHP-FPM
#    seperti resepsionis yang mengirim pesanan ke dapur PHP
#    IP PHP-FPM bisa anda 1270.0.0.1 jika PHP-FPM juga berada di komputer
#    yang sama dengan web server Halmos
# Untuk port, biasanya PHP-FPM menggunakan angka 9000, 
#    kecuali konfigurasinya di PHP-FPM anda ganti
php_server = 127.0.0.1
php_port = 9000
#php_server = /var/run/php/php7.3-fpm.sock

# php_fpm_config_path: Path ke file config pool PHP-FPM untuk kebutuhan audit Adaptive.
# Konfigurasi PHP-FPM ini dibutuhkan Halmos untuk membaca nilai konfigurasi max_children,
#   dan beberapa konfigurasi yang lain.
# Kenapa konfigurasi PHP-FPM dibutuhkan? 
#   Karena Halmos perlu menyesuaikan konfigurasi kecepatannya dengan PHP-FPM.
#   Jika kecepatan Halmos lebih tinggi dari PHP-FPM, maka seluruh kinerja server akan ikut lambat.
#   Sebaliknya jika kecepatan Halmos lebih lambat dari PHP-FPM, akibatny ajuga sama.
# Silahkan anda sesuaikan versi dan lokasi file konfigurasi PHP-FPM anda. 
#   Biasanya di-folder /etc/php/<versi>/fpm/pool.d/www.conf 
php_fpm_config_path = /etc/php/7.3/fpm/pool.d/www.conf

[Backend_Rust]
# Untuk menjalankan aplikasi Rust berbasis FastCGI.
#    Silahkan anda jalankan service spawn-fcgi yang sudah anda install
# ***********
# rust_ext : Rust berbeda dengan PHP, karena Rust yang dijalankan adalah binary-nya.
#    Maka untuk membedakan PHP dengan Rust, di konfigurasi ini diberi tanda ekstensi (.rs),
#    walaupun pada spawn-fcgi tidak tertulis ekstensi .rs
#    Silahka anda ganti jika dirasa ekstensi ini kurang pas di selera anda
# rust_port : agar tidak bertabrakan dengan port PHP-FPM, maka di konfigurasi ini
#    port-nya diisi 9001. Tetapi port ini bisa anda ganti (asal tidak bertabrakan dengan port yang lain), 
#    sesuai dengan port yang anda gunakan di spawn-fcgi.
rust_ext = .rs
rust_server = 127.0.0.1
rust_port = 9001

[Backend_Python]
# Untuk menjalankan aplikasi Python ini, anda perlu meng-install flup.
# Caranya :
#   pip install flup, atau
#   python3 -m pip install flup
# python_ext : user (browser) akan mengakses python dengan cara : 
#   mengakses URL : shttp://<domain>:port/<nama_program>.py
python_ext = .py
python_server = 127.0.0.1
python_port = 9002

[Performance]
# request_buffer_size : Ukuran tempat sementara (buffer) saat membaca request.
#    Digunakan Halmos untuk menghitung kapasitas maksimal worker secara otomatis (Adaptive)
#    Sebenarnya angka 4096 ini sudah ideal untuk mesin kecil maupun besar.
#    tetapi jika anda ingin merubah (menambah/mengurangi) juga tidak apa-apa
request_buffer_size = 4096

[VirtualHosts]
# Fitur VirtualHosts memungkinkan satu server Halmos melayani banyak website sekaligus.
#    Seperti satu gedung yang punya banyak “ruangan toko” yang berbeda.
#    Server akan melihat nama domain yang diminta browser (header Host),
#    lalu mengarahkan ke folder yang sesuai di bawah ini.
# *******************
# Jika anda mencoba Virtual Host di komputer sendiri (local development), 
#    anda harus memberi tahu sistem bahwa domain "palsu" tersebut mengarah ke IP laptop anda. 
# Caranya : 
#    1. Buka file /etc/hosts, lalu tambahkan IP dan nama virtual host-nya. 
#       Contoh : 127.0.0.1   testing.com
#    2. Isi nama virtual host-nya (sesuai dgn yang tertulis di etc/hosts),
#       dan nama folder project-nya. 
#       Contoh : testing.com <ini nama VHost> = /var/www/html/myproject<Nama folder project>
# *******************
# Dibawah ini adalah daftar virtual host-nya (catatan maksimal 32).
#    Silakan hapus tanda # jika anda akan mengaktifkan Virtual Host tersebut
#    Silahkan ganti nama Virtual Host seseuai selera anda.
#    Dan jangan lupa, pastikan folder project anda benar-benar ada! 
testing.com = /var/www/halmos/myproject
#blog-pribadi.id = /var/www/halmos/blog/
#halmos.dev = /var/www/halmos/dev/
